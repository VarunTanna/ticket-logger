(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{75:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c,a,r,s,i,l,j,o,b,d,u,m,h,O=n(1),p=n.n(O),x=n(36),g=n.n(x),v=(n(75),n(18)),f=n(65),y=n(104),k=n(106),N=n(103),w=n(63),S=n(11),$=n(6),C=n(108),T=n(0),_=function(e){var t=e.tickets,n=e.title;return t.length?Object(T.jsxs)("div",{children:[Object(T.jsx)("h3",{className:"text-primary",children:n}),Object(T.jsx)("div",{className:"flex-row justify-space-between my-4",children:t&&t.map((function(e){return Object(T.jsx)("div",{className:"col-12 col-xl-6",children:Object(T.jsxs)("div",{className:"card mb-3",children:[Object(T.jsxs)("h4",{className:"card-header bg-dark text-light p-2 m-0",children:[e.name," ",Object(T.jsx)("br",{}),Object(T.jsxs)("span",{className:"text-white",style:{fontSize:"1rem"},children:["currently has ",e.skills?e.skills.length:0," ","tickets",e.skills&&1===e.skills.length?"":"s"]})]}),Object(T.jsx)(S.b,{className:"btn btn-block btn-squared btn-light text-dark",to:"/tickets/".concat(e._id),children:"View and endorse your tickets."})]})},e._id)}))})]}):Object(T.jsx)("h3",{children:"No Tickets Yet"})},D=n(15),I=n(105),G=(Object(I.a)(c||(c=Object(D.a)(["\n  query user($email: String!) {\n    user(email: $email) {\n      _id\n      email\n      password\n      github\n      \n    }\n  }\n"]))),Object(I.a)(a||(a=Object(D.a)(["\n  query users {\n    users {\n      _id\n      email\n      github\n    }\n  }\n"])))),P=Object(I.a)(r||(r=Object(D.a)(["\n  query tickets {\n    tickets {\n      _id\n      title\n    }\n  }\n"]))),F=(Object(I.a)(s||(s=Object(D.a)(["\n  query ticket($ticketId: ID!) {\n    ticket(ticketId: $ticketId) {\n      _id\n      title\n      ticket\n    }\n  }\n"]))),Object(I.a)(i||(i=Object(D.a)(["\n  query me {\n    me {\n      _id\n      name\n      tickets\n    }\n  }\n"]))),Object(I.a)(l||(l=Object(D.a)(["\n  query groups {\n    groups {\n      _id\n      name\n      users {\n        email\n        github\n      }\n    }\n  }\n"])))),q=(Object(I.a)(j||(j=Object(D.a)(["\n  query group {\n    users {\n      _id\n      email\n      github\n    }\n  }\n"]))),Object(I.a)(o||(o=Object(D.a)(["\n  query projects {\n    projects {\n      _id\n      name\n      repo\n    }\n  }\n"])))),Y=function(){var e=Object(C.a)(P),t=e.loading,n=e.data,c=(null===n||void 0===n?void 0:n.tickets)||[];return Object(T.jsx)("main",{children:Object(T.jsx)("div",{className:"flex-row justify-center",children:Object(T.jsx)("div",{className:"col-12 col-md-10 my-3",children:t?Object(T.jsx)("div",{children:"Loading..."}):Object(T.jsx)(_,{tickets:c,title:"Here are the current tickets..."})})})})},L=n(34),M=n(47),U=n(13),V=n(8),z=n(101),B=Object(I.a)(b||(b=Object(D.a)(["\n  mutation addUser($email: String!, $password: String!, $github: String!,) {\n    addUser(email: $email, password: $password, github: $github, ) {\n      token\n      user {\n        _id\n        github\n        email\n      }\n    }\n  }\n"]))),E=Object(I.a)(d||(d=Object(D.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        email\n        github\n      }\n    }\n  }\n"]))),A=Object(I.a)(u||(u=Object(D.a)(["\n  mutation createProject($name: String!, $repo: String!, $groupId: ID!) {\n    createProject(name: $name, repo: $repo, groupId: $groupId) {\n      _id\n      name\n      repo\n      group {\n        name\n      }\n    }\n  }\n"]))),H=Object(I.a)(m||(m=Object(D.a)(["\n  mutation createTicket($title: String!, $description: String!, $type: String!, $project: String!, $order: Int!, $duedate: String!, ) {\n    createTicket(title: $title, description: $description, type: $type, project: $project, order: $order, duedate: $duedate) {\n      title\n      description\n      type\n      project\n      order\n      duedate\n    }\n  }\n"]))),J=Object(I.a)(h||(h=Object(D.a)(["\n  mutation createGroup($name: String!, $users:[String]!) {\n    createGroup(name: $name, users: $users) {\n      name\n      users {\n        email\n      } \n    }\n  }\n"]))),R=n(26),K=n(27),Q=n(53),W=new(function(){function e(){Object(R.a)(this,e)}return Object(K.a)(e,[{key:"getProfile",value:function(){return Object(Q.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(Q.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),X=function(){var e=Object(O.useState)({email:"",password:"",github:""}),t=Object(V.a)(e,2),n=t[0],c=t[1],a=Object(z.a)(B),r=Object(V.a)(a,2),s=r[0],i=r[1],l=i.error,j=i.data,o=function(e){var t=e.target,a=t.name,r=t.value;c(Object(U.a)({email:n.email.toLowerCase(),password:n.password,github:n.github},a,r))},b=function(){var e=Object(M.a)(Object(L.a)().mark((function e(t){var c,a;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,s({variables:Object(v.a)({},n)});case 5:c=e.sent,a=c.data,W.login(a.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(T.jsx)("div",{className:"col-12 col-lg-10",children:Object(T.jsxs)("div",{className:"card",children:[Object(T.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(T.jsxs)("div",{className:"card-body",children:[j?Object(T.jsxs)("p",{children:["Success! You may now head"," ",Object(T.jsx)(S.b,{to:"/",children:"back to the homepage."})]}):Object(T.jsxs)("form",{onSubmit:b,children:[Object(T.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:o}),Object(T.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:o}),Object(T.jsx)("input",{className:"form-input",placeholder:"Your GitHub ID",name:"github",type:"text",value:n.name,onChange:o}),Object(T.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(T.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})},Z=function(e){var t=Object(O.useState)({email:"",password:""}),n=Object(V.a)(t,2),c=n[0],a=n[1],r=Object(z.a)(E),s=Object(V.a)(r,2),i=s[0],l=s[1],j=l.error,o=l.data,b=function(e){var t=e.target,n=t.name,r=t.value;a(Object(v.a)(Object(v.a)({},c),{},Object(U.a)({},n,r)))},d=function(){var e=Object(M.a)(Object(L.a)().mark((function e(t){var n,r;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(c),e.prev=2,e.next=5,i({variables:Object(v.a)({},c)});case 5:n=e.sent,r=n.data,W.login(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:a({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(T.jsx)("div",{className:"col-12 col-lg-10",children:Object(T.jsxs)("div",{className:"card",children:[Object(T.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(T.jsxs)("div",{className:"card-body",children:[o?Object(T.jsxs)("p",{children:["Success! You may now head"," ",Object(T.jsx)(S.b,{to:"/",children:"back to the homepage."})]}):Object(T.jsxs)("form",{onSubmit:d,children:[Object(T.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:c.email,onChange:b}),Object(T.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:c.password,onChange:b}),Object(T.jsx)("button",{className:"btn btn-block btn-info",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),j&&Object(T.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:j.message})]})]})})})},ee=function(){var e=Object(C.a)(q),t=(e.loading,e.data),n=(null===t||void 0===t?void 0:t.projects)||[];return console.log(n),n.length?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(S.b,{className:"btn btn-sm btn-primary m-2",to:"/newProject",children:"Add a Project"}),Object(T.jsxs)("table",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Repo"}),Object(T.jsx)("th",{children:"Group"})]}),n&&n.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.repo}),Object(T.jsx)("td",{children:e.group})]})}))]})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h3",{children:"No Projects Yet"}),Object(T.jsx)(S.b,{className:"btn btn-lg btn-primary m-2",to:"/newProject",children:"Add a Project"})]})},te=n(32);var ne={form:{margin:"18px"},input:{display:"block",margin:"5px",width:"100%"}},ce=function(){var e=Object(C.a)(F),t=(e.loading,e.data),n=(null===t||void 0===t?void 0:t.groups)||[];console.log(n);for(var c=[],a=0;a<n.length;a++){var r={key:n[a]._id,value:n[a]._id,label:n[a].name};c.push(r)}var s=Object(O.useState)(""),i=Object(V.a)(s,2),l=i[0],j=i[1],o=Object(O.useState)(""),b=Object(V.a)(o,2),d=b[0],u=b[1],m=Object(O.useState)(),h=Object(V.a)(m,2),p=h[0],x=h[1],g=Object(z.a)(A),v=Object(V.a)(g,2),f=v[0],y=v[1].error;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h1",{children:"Create a Project"}),Object(T.jsxs)("form",{className:"form",style:ne.form,children:[Object(T.jsx)("label",{children:"Name:"}),Object(T.jsx)("input",{value:l,name:"name",type:"text",placeholder:"project name",onChange:function(e){var t=e.target,n=(t.name,t.value);j(n)},style:ne.input}),Object(T.jsx)("label",{children:"Repository:"}),Object(T.jsx)("textarea",{rows:4,value:d,name:"repo",type:"textarea",placeholder:"enter github repo",onChange:function(e){var t=e.target,n=(t.name,t.value);u(n)},style:ne.input}),Object(T.jsx)("label",{children:"Group:"}),Object(T.jsx)(te.a,{options:c,onChange:function(e){console.log(e),x(e.value)}}),Object(T.jsx)("br",{}),Object(T.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),console.log(d);f({variables:{groupId:p,name:l,repo:d}}).data},className:"submit",children:"Submit"})]}),y&&Object(T.jsx)("div",{children:Object(T.jsx)("p",{className:"error-text",children:y})})]})},ae=function(){var e=Object(C.a)(P);return e.length?Object(T.jsx)("div",{children:Object(T.jsx)("div",{className:"ticketTable",children:Object(T.jsxs)("table",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Title"}),Object(T.jsx)("th",{children:"Type"}),Object(T.jsx)("th",{children:"Description"}),Object(T.jsx)("th",{children:"Project"}),Object(T.jsx)("th",{children:"Order"}),Object(T.jsx)("th",{children:"Due-Date"})]}),e&&e.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.title}),Object(T.jsx)("td",{children:e.type}),Object(T.jsx)("td",{children:e.description}),Object(T.jsx)("td",{children:e.project}),Object(T.jsx)("td",{children:e.order}),Object(T.jsx)("td",{children:e.duedate})]})}))]})})}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h3",{children:"No Tickets Yet"}),Object(T.jsx)(S.b,{className:"btn btn-lg btn-primary m-2",to:"/newTicket",children:"Create a Ticket"})]})},re=function(){return Object(T.jsx)("header",{className:"bg-info text-dark mb-4 py-3 display-flex align-center",children:Object(T.jsxs)("div",{className:"container flex-column justify-space-between-lg justify-center align-center text-center",children:[Object(T.jsxs)(S.b,{className:"text-dark",to:"/",children:[Object(T.jsx)("h1",{className:"m-0",style:{fontSize:"3rem"},children:"Ticket Logger"}),Object(T.jsx)("img",{width:"80px",src:"logo192.png"})]}),Object(T.jsx)("div",{children:W.loggedIn()?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(S.b,{className:"btn btn-lg btn-primary m-2",to:"/myTickets",children:"View My Tickets"}),Object(T.jsx)(S.b,{className:"btn btn-lg btn-primary m-2",to:"/myGroups",children:"My Groups"}),Object(T.jsx)(S.b,{className:"btn btn-lg btn-primary m-2",to:"/project",children:"My Projects"}),Object(T.jsx)("button",{className:"btn btn-lg btn-light m-2",onClick:function(e){e.preventDefault(),W.logout()},children:"Logout"})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(S.b,{className:"btn btn-lg btn-primary m-2",to:"/login",children:"Login"}),Object(T.jsx)(S.b,{className:"btn btn-lg btn-light m-2",to:"/signup",children:"Signup"})]})})]})})},se=function(){var e=Object($.e)(),t=Object($.f)();return Object(T.jsx)("footer",{className:"w-100 mt-auto text-dark p-4",children:Object(T.jsxs)("div",{className:"container text-center mb-5",children:["/"!==e.pathname&&Object(T.jsx)("button",{className:"btn btn-dark mb-3",onClick:function(){return t(-1)},children:"\u2190 Go Back"}),Object(T.jsxs)("h4",{children:["\xa9 ",(new Date).getFullYear()," - Varun, Sela, Chris, Victoria."]})]})})};var ie={form:{margin:"18px"},input:{display:"block",margin:"5px",width:"100%"}},le=function(){var e=Object(C.a)(q),t=(e.loading,e.data),n=(null===t||void 0===t?void 0:t.projects)||[];console.log(n);for(var c=[],a=0;a<n.length;a++){var r={key:n[a]._id,value:n[a].email,label:n[a].email};c.push(r)}var s=Object(O.useState)({title:"",description:"",type:"",project:"",order:"",duedate:""}),i=Object(V.a)(s,2),l=i[0],j=i[1],o=Object(z.a)(H),b=Object(V.a)(o,2),d=b[0],u=b[1].error,m=function(e){var t=e.target,n=t.name,c=t.value;j(Object(v.a)(Object(v.a)({},l),{},Object(U.a)({},n,c)))};return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h1",{children:"Create a Ticket"}),Object(T.jsxs)("form",{className:"form",style:ie.form,children:[Object(T.jsx)("label",{children:"Title:"}),Object(T.jsx)("input",{value:l.title,name:"title",type:"text",placeholder:"ticket title",onChange:m,style:ie.input}),Object(T.jsx)("label",{children:"Description:"}),Object(T.jsx)("textarea",{rows:4,value:l.description,name:"description",type:"textarea",placeholder:"Type your description here",onChange:m,style:ie.input}),Object(T.jsx)("label",{children:"Type:"}),Object(T.jsx)("input",{value:l.type,name:"type",type:"text",placeholder:"ticket type",onChange:m,style:ie.input}),Object(T.jsx)("label",{children:"Project:"}),Object(T.jsx)(te.a,{options:c,isMulti:!0}),Object(T.jsx)("br",{}),Object(T.jsx)("label",{children:"Order:"}),Object(T.jsx)("input",{value:l.order,name:"order",type:"integer",placeholder:"order number",onChange:m,style:ie.input}),Object(T.jsx)("label",{children:"Due Date:"}),Object(T.jsx)("input",{value:l.duedate,name:"duedate",type:"text",placeholder:"ticket due date",onChange:m,style:ie.input}),Object(T.jsx)("br",{}),Object(T.jsx)("button",{type:"button",onClick:function(e){e.preventDefault();d({variables:Object(v.a)({},l)}).data},className:"submit",children:"Submit"})]}),u&&Object(T.jsx)("div",{children:Object(T.jsx)("p",{className:"error-text",children:u})})]})},je=function(){var e=Object(C.a)(F),t=(e.loading,e.data);console.log(t);var n=(null===t||void 0===t?void 0:t.groups)||[];return console.log(n),n.length?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(S.b,{className:"btn btn-lg btn-primary m-2",to:"/newGroup",children:"Create a Group"}),Object(T.jsxs)("table",{children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Name"}),Object(T.jsx)("th",{children:"Users"}),Object(T.jsx)("th",{children:"Delete Group"})]})}),n&&n.map((function(e){return Object(T.jsx)("tbody",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e.name}),Object(T.jsx)("td",{children:e.users.map((function(e){return Object(T.jsx)("span",{className:"btn m-1",children:e.email})}))}),Object(T.jsx)("td",{children:Object(T.jsx)("a",{href:"nowhere/"+e._id,children:Object(T.jsx)("img",{src:"delete.png",alt:"Delete group "+e.name})})})]})})}))]})]}):Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h3",{children:"No Groups Yet"}),Object(T.jsx)(S.b,{className:"btn btn-lg btn-primary m-2",to:"/newGroup",children:"Create a Group"})]})};var oe={form:{margin:"18px"},input:{display:"block",margin:"5px",width:"100%"}},be=function(){var e=Object(C.a)(G),t=(e.loading,e.data),n=(null===t||void 0===t?void 0:t.users)||[];console.log(n);for(var c=[],a=0;a<n.length;a++){var r={value:n[a]._id,label:n[a].email};c.push(r)}console.log(c);var s=Object(O.useState)(""),i=Object(V.a)(s,2),l=i[0],j=i[1],o=[],b=Object(z.a)(J),d=Object(V.a)(b,2),u=d[0];function m(e,t,n){return n.indexOf(e)===t}return d[1].error,Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h1",{children:"Create a Group"}),Object(T.jsxs)("form",{className:"form",style:oe.form,children:[Object(T.jsx)("label",{children:"Name:"}),Object(T.jsx)("input",{value:l,name:"name",type:"text",placeholder:"Group name",onChange:function(e){var t=e.target,n=(t.name,t.value);j(n)},style:oe.input}),Object(T.jsx)("label",{children:"Users:"}),Object(T.jsx)(te.a,{options:c,onChange:function(e){console.log(e);for(var t=0;t<e.length;t++){var n=e[t].value;o.push(n),console.log(o)}},isMulti:!0}),Object(T.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),console.log(o);var t=o.filter(m);u({variables:{name:l,users:t}}).data},className:"submit",children:"Submit"})]})]})},de=Object(f.a)({uri:"/graphql"}),ue=Object(w.a)((function(e,t){var n=t.headers,c=localStorage.getItem("id_token");return{headers:Object(v.a)(Object(v.a)({},n),{},{authorization:c?"Bearer ".concat(c):""})}})),me=new y.a({link:ue.concat(de),cache:new k.a});var he=function(){return Object(T.jsx)(N.a,{client:me,children:Object(T.jsx)(S.a,{children:Object(T.jsxs)("div",{className:"flex-column justify-flex-start min-100-vh",children:[Object(T.jsx)(re,{}),Object(T.jsx)("div",{className:"container",children:Object(T.jsxs)($.c,{children:[Object(T.jsx)($.a,{path:"/",element:Object(T.jsx)(Y,{})}),Object(T.jsx)($.a,{path:"/login",element:Object(T.jsx)(Z,{})}),Object(T.jsx)($.a,{path:"/signup",element:Object(T.jsx)(X,{})}),Object(T.jsx)($.a,{path:"/myTickets",element:Object(T.jsx)(ae,{})}),Object(T.jsx)($.a,{path:"/newTicket",element:Object(T.jsx)(le,{})}),Object(T.jsx)($.a,{path:"/myGroups",element:Object(T.jsx)(je,{})}),Object(T.jsx)($.a,{path:"/newGroup",element:Object(T.jsx)(be,{})}),Object(T.jsx)($.a,{path:"/newProject/",element:Object(T.jsx)(ce,{})}),Object(T.jsx)($.a,{path:"/Project/",element:Object(T.jsx)(ee,{})})]})}),Object(T.jsx)(se,{})]})})})};g.a.render(Object(T.jsx)(p.a.StrictMode,{children:Object(T.jsx)(he,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.f2693134.chunk.js.map